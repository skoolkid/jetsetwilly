<!DOCTYPE html>
<html>
<head>
<title>Jet Set Willy: Routine at 37056</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Jet Set Willy" src="../../images/logo-dec.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="37046.html">37046</a>
</td>
<td class="up">Up: <a href="../maps/all.html#37056">Map</a></td>
<td class="next">
Next: <a href="37310.html">37310</a>
</td>
</tr>
</table>
<div class="description">37056: Move the rope and guardians in the current room</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="35245.html">35245</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37056"></span>37056</td>
<td class="instruction">LD IX,33024</td>
<td class="comment-1" rowspan="1">Point <span class="register">IX</span> at the first byte of the first entity buffer at <a href="33024.html">33024</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37060"></span>
<div class="comments">
<div class="paragraph">
The entity-moving loop begins here.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37060"></span>37060</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1">Pick up the first byte of the current entity's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="37063"></span>37063</td>
<td class="instruction">CP 255</td>
<td class="comment-1" rowspan="1">Have we already dealt with every entity?</td>
</tr>
<tr>
<td class="address-1"><span id="37065"></span>37065</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if so</td>
</tr>
<tr>
<td class="address-1"><span id="37066"></span>37066</td>
<td class="instruction">AND 3</td>
<td class="comment-1" rowspan="1">Keep only bits 0 and 1 (which determine the type of entity)</td>
</tr>
<tr>
<td class="address-1"><span id="37068"></span>37068</td>
<td class="instruction">JP Z,<a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">Jump to consider the next entity buffer if this one belongs to an arrow or is unused</td>
</tr>
<tr>
<td class="address-1"><span id="37071"></span>37071</td>
<td class="instruction">CP 1</td>
<td class="comment-1" rowspan="1">Is this a horizontal guardian?</td>
</tr>
<tr>
<td class="address-1"><span id="37073"></span>37073</td>
<td class="instruction">JP Z,<a href="37056.html#37171">37171</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="37076"></span>37076</td>
<td class="instruction">CP 2</td>
<td class="comment-1" rowspan="1">Is this a vertical guardian?</td>
</tr>
<tr>
<td class="address-1"><span id="37078"></span>37078</td>
<td class="instruction">JP Z,<a href="37056.html#37247">37247</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37081"></span>
<div class="comments">
<div class="paragraph">
We are dealing with a rope.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="37081"></span>37081</td>
<td class="instruction">BIT 7,(IX+0)</td>
<td class="comment-1" rowspan="1">Is the rope currently swinging right to left?</td>
</tr>
<tr>
<td class="address-1"><span id="37085"></span>37085</td>
<td class="instruction">JR Z,<a href="37056.html#37119">37119</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37087"></span>
<div class="comments">
<div class="paragraph">
The rope is swinging left to right.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="37087"></span>37087</td>
<td class="instruction">LD A,(IX+1)</td>
<td class="comment-1" rowspan="1">Pick up the animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37090"></span>37090</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1">Is the rope currently swinging away from the centre?</td>
</tr>
<tr>
<td class="address-1"><span id="37092"></span>37092</td>
<td class="instruction">JR Z,<a href="37056.html#37109">37109</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37094"></span>
<div class="comments">
<div class="paragraph">
The rope is swinging left to right, towards the centre (132&lt;=<span class="register">A</span>&lt;=182).
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="37094"></span>37094</td>
<td class="instruction">SUB 2</td>
<td class="comment-1" rowspan="1">Subtract 2 from the animation frame index in <span class="register">A</span></td>
</tr>
<tr>
<td class="address-1"><span id="37096"></span>37096</td>
<td class="instruction">CP 148</td>
<td class="comment-1" rowspan="1">Is it still 148 or greater?</td>
</tr>
<tr>
<td class="address-1"><span id="37098"></span>37098</td>
<td class="instruction">JR NC,<a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">If so, use it as the next animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37100"></span>37100</td>
<td class="instruction">SUB 2</td>
<td class="comment-1" rowspan="1">Subtract 2 from the animation frame index again</td>
</tr>
<tr>
<td class="address-1"><span id="37102"></span>37102</td>
<td class="instruction">CP 128</td>
<td class="comment-1" rowspan="1">Is it 128 now?</td>
</tr>
<tr>
<td class="address-1"><span id="37104"></span>37104</td>
<td class="instruction">JR NZ,<a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">If not, use it as the next animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37106"></span>37106</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">The rope has reached the centre, so the next animation frame index is 0</td>
</tr>
<tr>
<td class="address-1"><span id="37107"></span>37107</td>
<td class="instruction">JR <a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">Jump to set it</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37109"></span>
<div class="comments">
<div class="paragraph">
The rope is swinging left to right, away from the centre (0&lt;=<span class="register">A</span>&lt;=52).
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37109"></span>37109</td>
<td class="instruction">ADD A,2</td>
<td class="comment-1" rowspan="1">Add 2 to the animation frame index in <span class="register">A</span></td>
</tr>
<tr>
<td class="address-1"><span id="37111"></span>37111</td>
<td class="instruction">CP 18</td>
<td class="comment-1" rowspan="1">Is it now 18 or greater?</td>
</tr>
<tr>
<td class="address-1"><span id="37113"></span>37113</td>
<td class="instruction">JR NC,<a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">If so, use it as the next animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37115"></span>37115</td>
<td class="instruction">ADD A,2</td>
<td class="comment-1" rowspan="1">Add 2 to the animation frame index again</td>
</tr>
<tr>
<td class="address-1"><span id="37117"></span>37117</td>
<td class="instruction">JR <a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">Use this value as the next animation frame index</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37119"></span>
<div class="comments">
<div class="paragraph">
The rope is swinging right to left.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37119"></span>37119</td>
<td class="instruction">LD A,(IX+1)</td>
<td class="comment-1" rowspan="1">Pick up the animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37122"></span>37122</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1">Is the rope currently swinging away from the centre?</td>
</tr>
<tr>
<td class="address-1"><span id="37124"></span>37124</td>
<td class="instruction">JR NZ,<a href="37056.html#37141">37141</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37126"></span>
<div class="comments">
<div class="paragraph">
The rope is swinging right to left, towards the centre (4&lt;=<span class="register">A</span>&lt;=54).
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="37126"></span>37126</td>
<td class="instruction">SUB 2</td>
<td class="comment-1" rowspan="1">Subtract 2 from the animation frame index in <span class="register">A</span></td>
</tr>
<tr>
<td class="address-1"><span id="37128"></span>37128</td>
<td class="instruction">CP 20</td>
<td class="comment-1" rowspan="1">Is it still 20 or greater?</td>
</tr>
<tr>
<td class="address-1"><span id="37130"></span>37130</td>
<td class="instruction">JR NC,<a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">If so, use it as the next animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37132"></span>37132</td>
<td class="instruction">SUB 2</td>
<td class="comment-1" rowspan="1">Subtract 2 from the animation frame index again</td>
</tr>
<tr>
<td class="address-1"><span id="37134"></span>37134</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Is it 0 now?</td>
</tr>
<tr>
<td class="address-1"><span id="37135"></span>37135</td>
<td class="instruction">JR NZ,<a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">If not, use it as the next animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37137"></span>37137</td>
<td class="instruction">LD A,128</td>
<td class="comment-1" rowspan="1">The rope has reached the centre, so the next animation frame index is 128</td>
</tr>
<tr>
<td class="address-1"><span id="37139"></span>37139</td>
<td class="instruction">JR <a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">Jump to set it</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37141"></span>
<div class="comments">
<div class="paragraph">
The rope is swinging right to left, away from the centre (128&lt;=<span class="register">A</span>&lt;=180).
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37141"></span>37141</td>
<td class="instruction">ADD A,2</td>
<td class="comment-1" rowspan="1">Add 2 to the animation frame index in <span class="register">A</span></td>
</tr>
<tr>
<td class="address-1"><span id="37143"></span>37143</td>
<td class="instruction">CP 146</td>
<td class="comment-1" rowspan="1">Is it now 146 or greater?</td>
</tr>
<tr>
<td class="address-1"><span id="37145"></span>37145</td>
<td class="instruction">JR NC,<a href="37056.html#37149">37149</a></td>
<td class="comment-1" rowspan="1">If so, use it as the next animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37147"></span>37147</td>
<td class="instruction">ADD A,2</td>
<td class="comment-1" rowspan="1">Add 2 to the animation frame index again</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37149"></span>
<div class="comments">
<div class="paragraph">
Now <span class="register">A</span> holds the rope's next animation frame index.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37149"></span>37149</td>
<td class="instruction">LD (IX+1),A</td>
<td class="comment-1" rowspan="1">Update the animation frame index</td>
</tr>
<tr>
<td class="address-1"><span id="37152"></span>37152</td>
<td class="instruction">AND 127</td>
<td class="comment-1" rowspan="1">Reset bit 7</td>
</tr>
<tr>
<td class="address-1"><span id="37154"></span>37154</td>
<td class="instruction">CP (IX+7)</td>
<td class="comment-1" rowspan="1">Does <span class="register">A</span> match the eighth byte of the rope's buffer (54)?</td>
</tr>
<tr>
<td class="address-1"><span id="37157"></span>37157</td>
<td class="instruction">JP NZ,<a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">If not, jump to consider the next entity</td>
</tr>
<tr>
<td class="address-1"><span id="37160"></span>37160</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="3">Flip bit 7 of the first byte of the rope's buffer: the rope has just changed direction and will now swing back towards the centre</td>
</tr>
<tr>
<td class="address-1"><span id="37163"></span>37163</td>
<td class="instruction">XOR 128</td>
</tr>
<tr>
<td class="address-1"><span id="37165"></span>37165</td>
<td class="instruction">LD (IX+0),A</td>
</tr>
<tr>
<td class="address-1"><span id="37168"></span>37168</td>
<td class="instruction">JP <a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">Jump to consider the next entity</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37171"></span>
<div class="comments">
<div class="paragraph">
We are dealing with a horizontal guardian.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37171"></span>37171</td>
<td class="instruction">BIT 7,(IX+0)</td>
<td class="comment-1" rowspan="1">Is the guardian currently moving left to right?</td>
</tr>
<tr>
<td class="address-1"><span id="37175"></span>37175</td>
<td class="instruction">JR NZ,<a href="37056.html#37212">37212</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37177"></span>
<div class="comments">
<div class="paragraph">
This guardian is moving right to left.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="37177"></span>37177</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="4">Update the guardian's animation frame (in bits 5 and 6 of the first byte of its buffer)</td>
</tr>
<tr>
<td class="address-1"><span id="37180"></span>37180</td>
<td class="instruction">SUB 32</td>
</tr>
<tr>
<td class="address-1"><span id="37182"></span>37182</td>
<td class="instruction">AND 127</td>
</tr>
<tr>
<td class="address-1"><span id="37184"></span>37184</td>
<td class="instruction">LD (IX+0),A</td>
</tr>
<tr>
<td class="address-1"><span id="37187"></span>37187</td>
<td class="instruction">CP 96</td>
<td class="comment-1" rowspan="1">Is it time to update the x-coordinate of the guardian sprite?</td>
</tr>
<tr>
<td class="address-1"><span id="37189"></span>37189</td>
<td class="instruction">JR C,<a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">If not, jump to consider the next entity</td>
</tr>
<tr>
<td class="address-1"><span id="37191"></span>37191</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="2">Pick up the sprite's current screen x-coordinate (0-31)</td>
</tr>
<tr>
<td class="address-1"><span id="37194"></span>37194</td>
<td class="instruction">AND 31</td>
</tr>
<tr>
<td class="address-1"><span id="37196"></span>37196</td>
<td class="instruction">CP (IX+6)</td>
<td class="comment-1" rowspan="1">Has the guardian reached the leftmost point of its path?</td>
</tr>
<tr>
<td class="address-1"><span id="37199"></span>37199</td>
<td class="instruction">JR Z,<a href="37056.html#37206">37206</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="37201"></span>37201</td>
<td class="instruction">DEC (IX+2)</td>
<td class="comment-1" rowspan="1">Decrement the sprite's x-coordinate</td>
</tr>
<tr>
<td class="address-1"><span id="37204"></span>37204</td>
<td class="instruction">JR <a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">Jump to consider the next entity</td>
</tr>
<tr>
<td class="address-2"><span id="37206"></span>37206</td>
<td class="instruction">LD (IX+0),129</td>
<td class="comment-1" rowspan="1">The guardian will now start moving left to right</td>
</tr>
<tr>
<td class="address-1"><span id="37210"></span>37210</td>
<td class="instruction">JR <a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">Jump to consider the next entity</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37212"></span>
<div class="comments">
<div class="paragraph">
This guardian is moving left to right.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37212"></span>37212</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="4">Update the guardian's animation frame (in bits 5 and 6 of the first byte of its buffer)</td>
</tr>
<tr>
<td class="address-1"><span id="37215"></span>37215</td>
<td class="instruction">ADD A,32</td>
</tr>
<tr>
<td class="address-1"><span id="37217"></span>37217</td>
<td class="instruction">OR 128</td>
</tr>
<tr>
<td class="address-1"><span id="37219"></span>37219</td>
<td class="instruction">LD (IX+0),A</td>
</tr>
<tr>
<td class="address-1"><span id="37222"></span>37222</td>
<td class="instruction">CP 160</td>
<td class="comment-1" rowspan="1">Is it time to update the x-coordinate of the guardian sprite?</td>
</tr>
<tr>
<td class="address-1"><span id="37224"></span>37224</td>
<td class="instruction">JR NC,<a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">If not, jump to consider the next entity</td>
</tr>
<tr>
<td class="address-1"><span id="37226"></span>37226</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="2">Pick up the sprite's current screen x-coordinate (0-31)</td>
</tr>
<tr>
<td class="address-1"><span id="37229"></span>37229</td>
<td class="instruction">AND 31</td>
</tr>
<tr>
<td class="address-1"><span id="37231"></span>37231</td>
<td class="instruction">CP (IX+7)</td>
<td class="comment-1" rowspan="1">Has the guardian reached the rightmost point of its path?</td>
</tr>
<tr>
<td class="address-1"><span id="37234"></span>37234</td>
<td class="instruction">JR Z,<a href="37056.html#37241">37241</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="37236"></span>37236</td>
<td class="instruction">INC (IX+2)</td>
<td class="comment-1" rowspan="1">Increment the sprite's x-coordinate</td>
</tr>
<tr>
<td class="address-1"><span id="37239"></span>37239</td>
<td class="instruction">JR <a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">Jump to consider the next entity</td>
</tr>
<tr>
<td class="address-2"><span id="37241"></span>37241</td>
<td class="instruction">LD (IX+0),97</td>
<td class="comment-1" rowspan="1">The guardian will now start moving right to left</td>
</tr>
<tr>
<td class="address-1"><span id="37245"></span>37245</td>
<td class="instruction">JR <a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">Jump to consider the next entity</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37247"></span>
<div class="comments">
<div class="paragraph">
We are dealing with a vertical guardian.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37247"></span>37247</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="3">Flip bit 3 of the first byte of the guardian's buffer (if bit 4 is set, the guardian's animation frame is updated on every pass through this routine; otherwise, it is updated on every second pass when bit 3 is set)</td>
</tr>
<tr>
<td class="address-1"><span id="37250"></span>37250</td>
<td class="instruction">XOR 8</td>
</tr>
<tr>
<td class="address-1"><span id="37252"></span>37252</td>
<td class="instruction">LD (IX+0),A</td>
</tr>
<tr>
<td class="address-1"><span id="37255"></span>37255</td>
<td class="instruction">AND 24</td>
<td class="comment-1" rowspan="1">Are bits 3 and 4 both reset now?</td>
</tr>
<tr>
<td class="address-1"><span id="37257"></span>37257</td>
<td class="instruction">JR Z,<a href="37056.html#37267">37267</a></td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="37259"></span>37259</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="3">Update the guardian's animation frame (in bits 5-7 of the first byte of its buffer)</td>
</tr>
<tr>
<td class="address-1"><span id="37262"></span>37262</td>
<td class="instruction">ADD A,32</td>
</tr>
<tr>
<td class="address-1"><span id="37264"></span>37264</td>
<td class="instruction">LD (IX+0),A</td>
</tr>
<tr>
<td class="address-2"><span id="37267"></span>37267</td>
<td class="instruction">LD A,(IX+3)</td>
<td class="comment-1" rowspan="3">Update the guardian's y-coordinate</td>
</tr>
<tr>
<td class="address-1"><span id="37270"></span>37270</td>
<td class="instruction">ADD A,(IX+4)</td>
</tr>
<tr>
<td class="address-1"><span id="37273"></span>37273</td>
<td class="instruction">LD (IX+3),A</td>
</tr>
<tr>
<td class="address-1"><span id="37276"></span>37276</td>
<td class="instruction">CP (IX+7)</td>
<td class="comment-1" rowspan="1">Has the guardian reached the lowest point of its path (maximum y-coordinate)?</td>
</tr>
<tr>
<td class="address-1"><span id="37279"></span>37279</td>
<td class="instruction">JR NC,<a href="37056.html#37294">37294</a></td>
<td class="comment-1" rowspan="1">If so, jump to change its direction of movement</td>
</tr>
<tr>
<td class="address-1"><span id="37281"></span>37281</td>
<td class="instruction">CP (IX+6)</td>
<td class="comment-1" rowspan="1">Compare the new y-coordinate with the minimum value (the highest point of its path)</td>
</tr>
<tr>
<td class="address-1"><span id="37284"></span>37284</td>
<td class="instruction">JR Z,<a href="37056.html#37288">37288</a></td>
<td class="comment-1" rowspan="1">If they match, jump to change the guardian's direction of movement</td>
</tr>
<tr>
<td class="address-1"><span id="37286"></span>37286</td>
<td class="instruction">JR NC,<a href="37056.html#37302">37302</a></td>
<td class="comment-1" rowspan="1">If the new y-coordinate is above the minimum value, jump to consider the next entity</td>
</tr>
<tr>
<td class="address-2"><span id="37288"></span>37288</td>
<td class="instruction">LD A,(IX+6)</td>
<td class="comment-1" rowspan="2">Make sure that the guardian's y-coordinate is set to its minimum value</td>
</tr>
<tr>
<td class="address-1"><span id="37291"></span>37291</td>
<td class="instruction">LD (IX+3),A</td>
</tr>
<tr>
<td class="address-2"><span id="37294"></span>37294</td>
<td class="instruction">LD A,(IX+4)</td>
<td class="comment-1" rowspan="3">Negate the y-coordinate increment; this changes the guardian's direction of movement</td>
</tr>
<tr>
<td class="address-1"><span id="37297"></span>37297</td>
<td class="instruction">NEG</td>
</tr>
<tr>
<td class="address-1"><span id="37299"></span>37299</td>
<td class="instruction">LD (IX+4),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37302"></span>
<div class="comments">
<div class="paragraph">
The current entity has been dealt with. Time for the next one.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="37302"></span>37302</td>
<td class="instruction">LD DE,8</td>
<td class="comment-1" rowspan="2">Point <span class="register">IX</span> at the first byte of the next entity's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="37305"></span>37305</td>
<td class="instruction">ADD IX,DE</td>
</tr>
<tr>
<td class="address-1"><span id="37307"></span>37307</td>
<td class="instruction">JP <a href="37056.html#37060">37060</a></td>
<td class="comment-1" rowspan="1">Jump back to deal with it</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="37046.html">37046</a>
</td>
<td class="up">Up: <a href="../maps/all.html#37056">Map</a></td>
<td class="next">
Next: <a href="37310.html">37310</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Jet Set Willy RAM disassembly 20221122</div>
<div class="copyright">&#169; 1984 Software Projects Ltd. &#169; 2022 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.8.</div>
<div><a href="../../asm/90C0.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>