<!DOCTYPE html>
<html>
<head>
<title>Jet Set Willy: Unused RAM at 93BB</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-u">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Jet Set Willy" src="../images/logo-hex.png" /></a></td>
<td class="page-header">Unused</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="91BE.html">91BE</a>
</td>
<td class="up">Up: <a href="../maps/all.html#93bb">Map</a></td>
<td class="next">
Next: <a href="93D1.html">93D1</a>
</td>
</tr>
</table>
<div class="description">93BB: Unused routine</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
This routine is not used, but if it were, it would set the INK colour for a 3x2 block of cells, maintaining the PAPER, BRIGHT and FLASH attributes of the current room background. It is identical to the code at 8E5F in Manic Miner that is used to set the attributes for a vertical guardian.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">INK colour (0-7)</td>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Attribute buffer address</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-1"><span id="93bb"></span>93BB</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Store the INK colour (bits 0-2)</td>
</tr>
<tr>
<td class="address-1"><span id="93bc"></span>93BC</td>
<td class="instruction">LD A,($80A0)</td>
<td class="comment-1" rowspan="1">Collect the current room's background tile attribute from <a href="80A0.html">80A0</a></td>
</tr>
<tr>
<td class="address-1"><span id="93bf"></span>93BF</td>
<td class="instruction">AND $F8</td>
<td class="comment-1" rowspan="1">Keep only bits 3-7 (PAPER, BRIGHT, FLASH)</td>
</tr>
<tr>
<td class="address-1"><span id="93c1"></span>93C1</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1">Merge the INK bits</td>
</tr>
<tr>
<td class="address-1"><span id="93c2"></span>93C2</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Store the resultant attribute byte</td>
</tr>
<tr>
<td class="address-1"><span id="93c3"></span>93C3</td>
<td class="instruction">LD DE,$001F</td>
<td class="comment-1" rowspan="1">Prepare <span class="register">DE</span> for later addition</td>
</tr>
<tr>
<td class="address-1"><span id="93c6"></span>93C6</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Move right one cell and store the attribute byte there</td>
</tr>
<tr>
<td class="address-1"><span id="93c7"></span>93C7</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="93c8"></span>93C8</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="2">Move left one cell and down a row and store the attribute byte there</td>
</tr>
<tr>
<td class="address-1"><span id="93c9"></span>93C9</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="93ca"></span>93CA</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Move right one cell and store the attribute byte there</td>
</tr>
<tr>
<td class="address-1"><span id="93cb"></span>93CB</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="93cc"></span>93CC</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="2">Move left one cell and down a row and store the attribute byte there</td>
</tr>
<tr>
<td class="address-1"><span id="93cd"></span>93CD</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="93ce"></span>93CE</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Move right one cell and store the attribute byte there</td>
</tr>
<tr>
<td class="address-1"><span id="93cf"></span>93CF</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="93d0"></span>93D0</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="91BE.html">91BE</a>
</td>
<td class="up">Up: <a href="../maps/all.html#93bb">Map</a></td>
<td class="next">
Next: <a href="93D1.html">93D1</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Jet Set Willy RAM disassembly 20221122</div>
<div class="copyright">&#169; 1984 Software Projects Ltd. &#169; 2022 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.8.</div>
<div><a href="../dec/asm/37819.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>